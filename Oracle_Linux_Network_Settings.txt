kali
kali

huseyin
toor
passwd //ilgili kullanıcının şifresini değiştirir.

oracle:
oracle123

ip addr //ip adresi ve diğer ağ bilgilerini verir.
//windows tarafında cmd aç
//sanal makinada ağ ayarlarına gel sağ üst köşeden.
IPv4 kısmından manual'a al. Statik vereceğiz IP'yi.
windows> ipconfig //ipadresini al
//sanal makinede addresses kısmna windowstan aldığın ip'nin adresini ver.
örn: 192.168.1.77
networkmask: 255.255.255.0
gateway: 192.168.1.1
dns: 192.168.1.1
//apply uygula
//wired connection off ardından on yap.
ip addr //sanal makinada ip kontrol et.
windows> ping 192.168.1.77
sanal>ping 192.168.1.65
//ping gitmiyor ana makinaya.
//windows üzerinden 
windows> scp "resim.jpg" huseyin@192.168.1.77:/home/huseyin/Pictures //<<--tırnak işareti olmazsa olmaz. "resim.jpg"
//sanalda misafir eklentilerini ekle.
//run'a bas kur yeniden başlat.
su - root

vim /etc/hosts

dnf install -y oracle-database-preinstall-19c
yum update -y


sqlplus /nolog //database bağlanmadan sadece sqlplus'ı çalıştırır.
conn / as sysdba //sonradan bağlandık hacı.
exit //sqlplustan çıktık.
sqlplus / as sysdba
sqlplus SYSTEM //SYSTEM ile bağlan ama şifre yok.
sqlplus SYSTEM/oracle123 //SYSTEM ile bağlan ama şifre var.
1>
ALTER USER HR IDENTIFIED BY HR ACCOUNT UNLOCK;
SQL COMMAND LINE'YI SQLcl'Yİ çalıştırmak için
sql / as sysdba;
conn HR/HR
2>
desc employees;
select * from employees;
root>
vi /etc/profile
NSL kısmını yy ile kopyala. p ile yapıştır.
son kısmındaki karakter kodlama kısmını UTF8 yap.
esc > shift > : > wq > enter > yeniden başlat
1>
sql / as sysdba;
startup
conn HR/HR
select * from employees; //emp yazar tab'a basarsan otomatik listeler.

2>
sql HR/HR
set sqlformat ansiconsole;
select * from empl //tab'a bas
col LAST_NAME FOR a20;
sql'in sqlplus'tan farkı hızlı formatlama olayıdır.
!clear //yap
clear //ikisi farklı. clear işe yaramıyor burada.
1>
SELECT /*csv*/ * FROM EMPLOYEES; //csv çıktısı olarak verir bir nevi EXCEL
SELECT /*html*/ * FROM EMPLOYEES;
SELECT /*xml*/ * FROM EMPLOYEES;
SELECT /*json*/ * FROM EMPLOYEES;
SELECT /*json-formatted*/ * FROM EMPLOYEES;
SELECT /*insert*/ * FROM EMPLOYEES;
SELECT /*text*/ * FROM EMPLOYEES;
2>
set sqlformat csv
SELECT * FROM EMPLOYEES
!clear
SET SQLFORMAT HTML
SET SQLFORMAT XML
SET SQLFORMAT JSON
SET SQLFORMAT JSON-FORMATTED
SET SQLFORMAT INSERT;
SET SQLFORMAT DEFAULT; //ORİJİNAL FORMATA DÖNDÜRÜR.
SET SQLFORMAT TEXT;
sqlcl sqlplustan 3. farkı java runtime 1.7 ve üzeri ister.
sqlplus java istemez.



-------
select instance_name, status from v$instance; //database ismini ve durumunu verir açık mı kapalı mı diye.
select global_name from global_name; //servis ismini verir.
lsnrctl status //listenerın yani bağlantı dinleyicinin durumunu verir.
lsnrctl start //listeler'i çalıştırır ama ayarlamadığımız için problemli.
The listener supports no services //listener çalıştı ama dinlediği bir servis yok. biraz bekle birazdan hazır hale geliyor.

------sanaldaki
Oracle Enterprice Manager Database Express
https://192.168.1.106:5500/em/login
SYS
oracle123
------ana makinadaki
SGA: SYSTEM GLOBAL AREA
PGA: PROCESS GLOBAL AREA





hacı connect için
lsnrctl status //bak
lsnrctl start //başlat biraz bekle listener 1 dakika sonra falan açılıyor.


1>
sql / as sysdba;
show user;
!clear
SELECT TABLESPACE_NAME, FILE_NAME, BYTES FROM DBA_DATA_FILES;
SET SQLFORMAT ANSICONSOLE;
cd /u01/app/oracle/oradata/ORCL/
ls -ltr //listeler.
SELECT A.*, B.BYTES FROM V$LOGFILE A, V$LOG B WHERE A.GROUP# = B.GROUP#;
cd $ORACLE_HOME
cd dbs
ls -l
show parameters //veritabanındaki tüm parametreleri gösterir.
SELECT * FROM V$PARAMETER //veritabanındaki tüm parametreleri gösterir.
SHOW PARAMETER CONTROL_FILES // control dosyalarının tüm parametreleri gösterir.
show parameters file //içinde file geçen tüm parametleri gösterir.
SELECT TABLESPACE_NAME, FILE_NAME, BYTES
FROM DBA_DATA_FILES;

SET LINESIZE 400
COL TABLESPACE_NAME FOR a10
COL FILE_NAME FOR a40
COL BYTES FOR 999,999,999
ED //EDİT NOT DEFTERİ İLE
run veya / //bufferdeki son sorguyu çalıştırır.

SHOW PARAMETER PFILE;
Oracle SPFILE (Server Parameter File) ve PFILE (Parameter File) veritabanı yapılandırma parametrelerini depolayan dosyalardır.

PFILE (Parameter File):

Metin Dosyası: Kolayca düzenlenebilir bir metin dosyasıdır.
Statik: Veritabanı başlatılmadan önce okunur ve veritabanı çalışırken değiştirilemez.
Kullanımı: init.ora adında bir dosya olarak saklanır ve başlatma sırasında okunur.
SPFILE (Server Parameter File):

İkili Dosya: Metin tabanlı olmayan, ikili bir dosyadır.
Dinamik: Veritabanı çalışırken değiştirilebilir ve değişiklikler anında uygulanabilir.
Kullanımı: spfile.ora olarak saklanır ve Oracle tarafından otomatik olarak yönetilir.
Karşılaştırma:

Değişiklik Yapma: SPFILE dinamik olarak değiştirilebilir, PFILE ise değişiklikten sonra yeniden başlatma gerektirir.
Yönetim Kolaylığı: SPFILE, yönetim kolaylığı ve esneklik sağlar.
Kurtarma: PFILE, sorun giderme ve kurtarma senaryolarında daha basit olabilir.
Her iki dosya da veritabanı yapılandırmasını tanımlar ve veritabanının nasıl davranacağını belirler, ancak SPFILE daha modern ve esnek bir yapı sunar.
show parameter remote_login_pass //password file'ın bilgilerini verir.
SELECT USERNAME, SYSDBA, SYSOPER FROM V$PWFILE_USERS;

cd $ORACLE_HOME
cd dbs
GRANT SYSDBA TO HR;
REVOKE SYSDBA FROM HR;
SELECT USERNAME, SYSDBA, SYSOPER, SYSBACKUP FROM V$PWFILE_USERS;
SELECT * FROM DBA_ROLES; //DBA'A AİT ROLLER. DBA'DE BİR ROL AMA BAŞKA ROLLERE SAHİP OLABİLİYOR.
SELECT * FROM DBA_ROLE_PRIVS WHERE GRANTED_ROLE = 'DBA';

STARTUP //ORACLE DATABASE BAŞLATMA KOMUTU
NOMOUNT: 
STARTUP NOMOUNT //KOMUTU INSTANCE'I START EDER.
PARAMETRE DOSYALARI (PFILE, SPFILE) OKUNUR.
BACKGROUND PROCESSLER BAŞLATILIR.
SGA'YA MEMORY TAHSİS EDİLİR.
ALERT LOGS TRACE FILES AÇILIR.
ARCHIVE DOSYALARI KONTROL EDİLİR YOKSA EĞER HATA VERİR.
RECOVERY İŞLERİ İÇİN KULLANILIR.
BU MOD YEDEK ALMAK İÇİN KULLANILIR. DIŞARIDAN KULLANIMA KAPALIDIR.
KULLANICILAR CONNECT OLAMAZ.

MOUNT:
STARTUP MOUNT //KOMUTU
NOMOUNT'DAKİLER DAHİL OLUR. ARDINDAN
CONTROL FILE OKUNUR.
DBA YETKİLİ KULLANICI DOSYA SİSTEMİNDEN TABLOLARI VE VİEWLERİ SORGULAYABİLİR.
KISACASI NOMOUNT'DA DOSYA SİSTEMİNDEKİ VERİTABANI DAHİL OLMAZ ANCAK
MOUNT'DA VERİTABANI DAHİL OLUR. INSTANCE ÜZERİNDE BELLEK TAHSİS EDİLİR.
VERİTABANI DOSYALARI O TAHSİL EDİLMİŞ BELLEK ALANLARIYLA İLİŞKİLENDİRİLİR.
BU MOD DAHA ÇOK RECOVERY, DB OBJELERİNİ(TABLE, VIEW VS...) YENIDEN ADLANDIRMA
VEYA BAKIM ONARIM İŞLEMLERİ İÇİN KULLANILIR. 
SADECE DBA YETKİLİ BİR KULLANICIYA AÇIKTIR NORMAL KULLANICILARA DEĞİL!

OPEN
STARTUP OPEN //OPEN ZORUNLU DEĞİL İKİSİ AYNI ŞEY.
MOUNT İLE AYNIDIR TEK FARK NORMAL KULLANICILARADA AÇILMIŞ OLMASIDIR.

NOMOUNT MODUNDAYKEN
ALTER DATABASE MOUNT //ILE MOUNT'A GEÇEBİLİRİZ.

ALTER DATABASE OPEN //ILE MOUNT'DAN OPEN'A GEÇEBİLİRİZ.

RESTRICT
STARTUP RESTRICT
ALTER SYSTEM ENABLE RESTRICTED SESSION;
BAZI DURUMLARDA BELIRLI KULLANICILARIN CONNECT OLMASI GEREKEBILIR.
ÖRNEĞİN SİSTEMİ DIŞARIYA KAPATIP BİRTAKIM SQL VE PL/SQL
KODLARIN ÇALIŞTIRILMASI GEREKEBİLİR.
DIŞARIDAN YENI BAĞLANTILARA İZİN VERİLMEZ!
YENİ KULLANICILAR CONNECT OLAMAZ!
SADECE DBA VE RESTRICTED SESSION ROLUNE SAHIP OLAN KULLANICILAR
CONNECT OLABİLİRLER.


MIGRATE - UPGRADE
STARTUP MIGRATE
STARTUP UPGRADE
VERİTABANI GÜNCELLEME ALACAĞINDA(PATCH - YAMA) ALACAĞI
GEÇİLECEĞİ ZAMAN BU MODA GEÇİYORUZ. BU MODDA UPDATE OLUYOR.


FORCE
STARTUP FORCE
VERİTABANI DEBUG İŞLEMLERİNDE DATABASE BU MODDA AÇILIR.
PL/SQL VEYA SQL DEGUB İLE KARIŞTIRILMAMALIDIR.
BU NOKTADA VERİTABANINDA OLUŞAN DAR BOĞAZLARI TESPİT İÇİN
DEBUG EDİLİR. BU MOD BUNUN İÇİN VARDIR.
FORCE MOD GANNIRTTIRTMALI MODDUR ÇOK MECBUR KALINMADIKÇA
KULLANILMAMALIDIR. ÇÜNKÜ ZAMANLA BUGLAR BİRİKİR
SIKINTIYA SEBEP OLABİLİR.


SELECT INSTANCE_NAME, STATUS FROM V$INSTANCE;
SELECT NAME, OPEN_MODE FROM V$DATABASE; //BU KOMUT MOUNT EDİLDİYSE ÇALIŞIR NOMOUNT'DA ÇALIŞMAZ.
SHUTDOWN IMMEDIATE; //VERITABANINI KAPATIR.
lsnrctl status //LISTENER YANİ BAĞLANTI DİNLEYİCİNİN DURUMUNA BAKARIZ.
lsnrctl stop //LISTENER'I KAPATIR.
STARTUP NOMOUNT

ALTER DATABASE MOUNT //ILE MOUNT'A GEÇEBİLİRİZ.

ALTER DATABASE OPEN //ILE MOUNT'DAN OPEN'A GEÇEBİLİRİZ.

SELECT TABLESPACE_NAME, FILE_NAME, BYTES
FROM DBA_DATA_FILES;

SELECT NAME FROM V$DATAFILE;
SHUTDOWN IMMEDIATE; //AÇIK OLAN/VAR OLAN SESSION'LARI KILL EDER. AÇIK OLAN TRANSACTIONLARI SONLANDIRIR VE VERİTABANINI TUTARLI BİR ŞEKİLDE SONLANDIRIR.
mv users01.dbf new_users01.dbf
pwd
ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORCL/users01.dbf' TO '/u01/app/oracle/oradata/ORCL/new_users01.dbf'

RESTRICTED
STARTUP RESTRICT //VERİTABANI KAPALIYKEN
ALTER SYSTEM ENABLE RESTRICTED SESSION; //OPEN MODDAYKEN.

RESTRICT MODDAN NORMAL YANİ OPEN MODA ALMAK İÇİN
SHUTDOWN, STARTUP
ALTER SYSTEM DISABLE RESTRICTED SESSION;

ALTER SYSTEM ENABLE RESTRICTED SESSION; //OPEN MODDAYKEN.
ALTER SYSTEM DISABLE RESTRICTED SESSION; //RESTRICT MODU KAPATIR VE NORMAL MODA GİRER.
SELECT INSTANCE_NAME, HOST_NAME, STATUS
FROM V$INSTANCE;
SELECT USERNAME, SID, SERIAL#, TYPE
FROM V$SESSION
WHERE TYPE <> 'BACKGROUND'; //BU KOMUT VERİTABANINA BAĞLI OLAN BAĞLANTILARI VERİR BACKGROUND YAZANLAR SİSTEMİN KENDİ HİZMETLERİDİR.

##RESTRICTED SESSION ROLUNE SAHİP OLAN KULLANICILARI GETİRİR. ##
SELECT DR.GRANTEE
FROM DBA_SYS_PRIVS DS, DBA_ROLE_PRIVS DR
WHERE DS.PRIVILEGE = 'RESTRICTED SESSION'
AND DS.GRANTEE = DR.GRANTED_ROLE
UNION
SELECT USERNAME
FROM DBA_SYS_PRIVS DS, DBA_USERS DU
WHERE DS.PRIVILEGE = 'RESTRICTED SESSION'
AND DS.GRANTEE = DU.USERNAME;

## VIEW'I SORGULAMA ##
SELECT * FROM KILL_SESSION;
## RESTRICTED SESSION ROLUNE SAHİP OLAN KULLANICILARI KILL EDECEK KOMUTU VERİR. ##
CREATE OR REPLACE VIEW KILL_SESSION
AS
SELECT 'ALTER SYSTEM KILL SESSION ''' || SID || ',' || SERIAL# ||''' IMMEDIATE;' AS KILL_QUERY
FROM V$SESSION
WHERE 
TYPE <> 'BACKGROUND'
AND
USERNAME NOT IN
(SELECT DR.GRANTEE
FROM DBA_SYS_PRIVS DS, DBA_ROLE_PRIVS DR
WHERE DS.PRIVILEGE = 'RESTRICTED SESSION'
AND DS.GRANTEE = DR.GRANTED_ROLE
UNION
SELECT USERNAME
FROM DBA_SYS_PRIVS DS, DBA_USERS DU
WHERE DS.PRIVILEGE = 'RESTRICTED SESSION'
AND DS.GRANTEE = DU.USERNAME);
ALTER SYSTEM KILL SESSION '240,14168' IMMEDIATE; //İLGİLİ RESTRICTED SESSION'A SAHİP OLMAYAN KULLANICIYI KİLL EDER!! BOĞAZLAR.

sqlplus SYS/SYS //BAĞLANAMAZ ÇÜNKÜ SYS'NİN BAĞLANABİLMESİ İÇİN DBA ROLUNE SAHİP OLMASI GEREKMEKTE. YOKSA OLMAZ!
sqlplus SYS/SYS AS SYSDBA === sqlplus / as sysdba //ikisi aynı anlama gelmektedir.
show user
clear screen



temel bazı sorgulamalar:
sqlplus / as sysdba //windows authentication.
desc V$VERSION //VERSION ISIMLI VIEW'IN VERİ YAPISINI SORGULAR.
SELECT BANNER FROM V$VERSION;
DESC PRODUCT_COMPONENT_VERSION;
COL PRODUCT FOR a12
col version format a15
col status for a20
SELECT PRODUCT, VERSION, STATUS FROM PRODUCT_COMPONENT_VERSION;
DESC DBA_REGISTRY
SELECT COMP_NAME, VERSION, STATUS FROM DBA_REGISTRY;
SELECT NAME FROM V$DATABASE;//DATABASE İSMİ SORFULAMA.
SELECT * FROM GLOBAL_NAME; //DATABASE DIŞ İSİM. DIŞ BAĞLANTI YAPARKEN KULLANILAN İSİMDİR.
SID(SYSTEM IDENTIFIER DİYE GEÇER AMA ISTANCE İSMİDİR ASLEN.)
SELECT INSTANCE FROM V$THREAD;
DESC V$INSTANCE;
SELECT INSTANCE_NAME, HOST_NAME, STATUS
FROM V$INSTANCE;
SHOW PARAMETER SERVICE_NAME;


2>
SELECT INSTANCE_NAME, STATUS, LOGINS FROM V$INSTANCE;
sql HR/HR
desc EMPLOYEES;
UPDATE EMPLOYEES
SET SALARY = SALARY * 1.5;

1>
SHUTDOWN //NORMAL MOD
SHUTDOWN NORMAL //BUDA NORMAL MOD YANİ 2Sİ AYNI ŞEY.

3>
sql HR/HR //bağlantı açılamaz çünkü update komutu commit edilmediği için transaction sonlandırılmadı.
//çünkü açık transaction ve açık bağlantı var.

//budurumda transactionları sonlandırmak lazım gelir.
//trasactionları sonlandırabilmek için 2 yöntem vardır.
1. commit veriyi kalıcı yansıt işlem bitsin.
2. rollback yapılan işlemi geri al işlem bitsin gitsin.
//hangını tercih edersen et.

2> ROLLBACK;
//SHUTDOWN YİNE ÇALIŞMAZ ÇÜNKÜ BAZI BAĞLANTILAR AÇIK ONLARINDA KAPATILMASINI BEKLEYECEK.
//AÇIK OLAN BAĞLANTILARI KAPATTIĞIMIZDA KÜT DİYE KAPANIR!


1>
sql / as sysdba
STARTUP
2>
sql HR/HR
UPDATE EMPLOYEE
SET SALARY = SALARY - 1.25;
1>
SHUTDOWN IMMEDIATE;
//BU KOMUT VERILDIĞI ANDAN İTİBAREN YENİ BAĞLANTILAR AÇILAMAZ!
//BU KOMUTU VERINCE TÜM TRANSACTIONLAR ROLLBACK EDILIR.
//MEMORY(BELLEK)'DEKI VERİLER DATAFILELLARA YAZILIR.
//TÜM CONNECTIONLAR KILL EIDLIR.
//VERITABANI KAPATILIR.
/*
YAPILAN TÜM DEĞİŞİKLİKLER REDOLOG YABİ BUFFER CACHE'A YAZAR
DBWRITER BACKGROUND PROCESS'I ZAMAN ZAMAN
REDOLOG YANİ BUFFER CACHE'DAN ALIP DATAFILLARA YAZAR.

*/
SHUTDOWN IMMEDIATE;
//BU KOMUT YENİ GİRİŞLERİ ENGELLER.
//MEVCUT BAĞLANTILAR YENİ İŞLEM(TRANSACTION) BAŞLATILAMAZ.
//BAŞLAMIŞ İŞLEMLER BİTER BİTMEZ MEVCUT BAĞLANTILAR OTOMATİK OLARAK KILL EDİLİR.
//TRANSACTIONLARI OTOMATİK OLARAK COMMIT EDER.
1>
STARTUP
SHUTDOWN TRANSACTIONAL;
//BAŞLAMIŞ OLAN İŞLEMLERİN BİTMESİNİ BEKLER BİTTİKTEN SONRA VERİTABANINI KAPATIR.
//BAĞLANTILARIN KAPATILMASINI BEKLEMEZ KENDİ KAPATIR.
2>
sql HR/HR
UPDATE EMPLOYEES
SET SALARY = SALARY *1.30;


/*
SHUTDOWN ABORT;
//BU KOMUT ÇALIŞTIRILDIĞINDA 
REDOLOG BUFFER YANİ MEMORYDE TUTULAN VERİLER DATAFILE
DOSYALARINA YAZILAMAZ.
COMMIT EDİLMEMİŞ İŞLEMLER ROLLBACK OLMAZ.
YAPILAN DEĞİŞİKLİKLER COMMIT'DE OLMAZ SADECE
REDOLOG BUFFER CACHE'DA BEKLER.
SHUTDOWN ABORT KOMUTU İLE KAPATILAN
VERİTABANI TUTARSIZ HALE GELİR.
VERİ BÜTÜNLÜĞÜ BOZULUR.
VERİTABANININ TEKRAR AÇILMASI ÇOK UZUN SÜRER.
BU MOD TEHLİKELİDİR. ÇÜNKÜ VERİTABANI BU METOTDA
KAPATILIRSA TUTARSIZ KAPANIR VE RECOVERY GEREKİR.

*/

/*
ARCHIVE LOG MODE.
VERİTABANINDA YAPILAN TÜM DEĞİŞİKLİKLERİN OTOMATİK OLARAK BİR YEDEĞİNİ
ALMAK İÇİN ARCHIVE LOG MODE ÇALIŞTIRILIR.
ARHIVE LOG MODE FAZLADAN DİSK KAYNAĞINA İHTİYAÇ DUYAR.
VERİTBANI PERFORMANSI NOARCHIVELOG MODE'A GÖRE BİRAZ DAHA YAVAŞTIR.
ARHIVELOG MODE'DA ÇALIŞAN VERİTBANINDA ARŞİV DOSYALARI GEÇMİŞ
BİR ZAMAN DİLİMİNE DÖNMEK İÇİN DAHA ÇOK DA RECOVERY(KURTARMA)
İŞLEMLERİ İÇİN KULLANILIR.


NEDEN ARHIVELOG MODDA ÇALIŞMALIYIZ?
VERİTBANI INSTALL EDİLDİĞİNDE 3 ADET REDOLOG DOSYASI OLUŞUR. 
YAPILAN TÜM DEĞİŞİKLİKLER BU REDOLOG DOSYALARINA YAZILIR.
BİRİNCİ REDOLOG DOSYASI DOLDUĞUNDA İKİNCİYE,
İKİNCİ DOLUNCA ÜÇÜNCÜYE YAZMAYA BAŞLAR.
ÜÇÜNCÜ REDOLOG DOSYASI DOLDUĞUNDA TEKRAR BİRİNCİ
REDOLOG DOSYASINA YAZMAYA BAŞLAR.
DOLAYISIYLA BİRİNCİ REDOLOG DOSYASINDAKİ ESKİ VERİLER KAYBEDİLİR.
VERİTBANINDA ARCHIVELOG MODE ÇALIŞTIRIRSAK VERİLER
REDOLOG DOSYALARI DOLSA BİLE VERİLER AYRI DOSYALARDA
TUTULACAĞI İÇİN DEĞİŞEN VERİ KAYBI OLMAYACAKTIR.

## UYGULAMA ##
1>
sql / as sysdba
startup
SELECT A.MEMBER, A.STATUS, B.BYTES
FROM V$LOGFILE A, V$LOG B
WHERE A.GROUP# = B.GROUP#;

SELECT NAME, OPEN_MODE, LOG_MODE
FROM V$DATABASE;

SHOW PARAMETER db_recovery_file_dest;
//fast recovery area'yı verir hacı.
//bu klasör yolu aslında kurtarma dosyalarının bulunduğu kısımdır.

2>
SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE ARCHIVELOG; //ÜZERİNDE ÇALIŞTIĞIMIZ VERİTBANINI ARCHIVELOG'A ALIR.
ALTER DATABASE NOARCHIVELOG; //ÜZERİNDE ÇALIŞTIĞIMIZ VERİTBANINI NOARCHIVELOG'A ALIR. YANİ ARCHIVELOG MODU KAPATIR.
/*
SHUTDOWN ABORT KOMUTU ARHIVELOG MODE AÇIK OLMADAN
ÇALIŞTIRILIRSA BÜYÜK RİST TAŞIR.
ARCHIVELOG MODE AÇIKKEN ÇALIŞTIRILIRSA VERİLER
KURTARILABİLİR.

/*
ABORT SENARYONU
VERİTABANINDA BİR SORUN OLDUĞUNDA SORUNDAN DOLAYISIYLA
VERİTABANI KAPANMIYORSA SİSTEM YENİDEN BAŞLATILABİLİR.
BU BİR ALTERNATİFTİR.
$>su - root //switch user yani kullanıcıyı değiştir. hangisine? root'a
$>pass: toor //root kullanıcısının şifresini giriyoruz.
$>reboot//yeinden başlatır.
show parameter log_archive_format; //archivelog dosyalarının formatını gösterir.
shutdown abort //komutunu verirsek transactionları
yarım kalacak veritbanını sağlıklı bir şekilde
kapatamayacak ve veride tutarsızlık olacaktır.
Bundan dolayı recovery gerekmektedir.
Connectionlarıda kill eder.
ALTER SYSTEM SWITCH LOGFILE;
//BU KOMUT REDOLOG/BUFFER CACHE'DEKI DEĞİŞİKLİKLERİ
OTOMATİK OLARAK VERİTABANINA YANİ DATAFILE'LARA YAZACAK
DOLAYISIYLA BİR TUTARLILIK ELDE EDECEĞİZ.
ALTER SYSTEM CHECKPOINT;
//BU KOMUTTA YUKARIDAKI ILE AYNI İŞİ YAPAR.

//BU KOMUTLARADAN SONRA 
SHUTDOWN ABORT //KOMUTU ÇALIŞTIRILABİLİR.
REDOLOG/BUFFER CACHE'DE TUTULAN VERİLER ORIJINAL DATAFILELLARA YUKARIDAKI KOMUTLAR İLE YAZILDIĞI İÇİN
VERİ KAYBI OLMAYACAK TUTARSIZLIK OLUŞMAYACAKTIR.
ARTIK SHUTDOWN ABORT KOMUTU SADECE CONNECTION'LARI KILL EDECEKTİR.
ŞİMDİ VERİTABANINI SAĞLIKLI BİR ŞEKİLDE AÇMAMIZ GEREKİYOR.
STARTUP RESTRICT //BAKIM GİBİ VEYA RECOVERY GİBİ
İŞLEMLERDE SADECE DBA YETKİLİ BİR KULLANICININ LOGİN OLMASINI 
SAĞLAYAN VERİTABANI AÇILMA MODUDUR.
STARTUP RESTRICT //SADECE DBA YETKİLİLER GİREBİLİR. BU MODDA AÇMAMIZIN SEBEBİ BAŞKALARI GİRERSE VERİDE DEĞİŞİKLİK YAPABİLİR YAPAMASIN DİYE. BAŞKASI GİRERSE TUTARSIZLIK OLUŞABİLİR.
SHUTDOWN IMMEDIATE; //CONNECTİON'LARI KILL EDER. TRANSACTİONLARI COMMITLER.
*/


/*ORACLE DATABASE HANGİ ARAÇLARLA KAPATILIP AÇILABİLİR?
DBA YETKİLİ OLARAK BAĞLANAN HER ARAÇLA YAPILABİLR.
sqlplus //Oracle'a ait.
sqlCl //Oracle'a ait. //comment line sql'in az daha gelişmişidir.
//Windows üzerinde sqlCı Oracle kurulumu ile gelmez sonradan yüklenir.
//Ancak Linux ile gelir.
SQL Developer //Oracle'a ait.
Toad //Oracle'a ait değil.
RMAN(Recovery Manager) //Oracle'a ait.
Services.mcs(Windows) //Oracle'a ait değil. Microsoft'a ait.

*/

/*
ORACLE DATABASE NETWORK

NETWORK KONFİGURASYON ARAÇLARI(NETWORKING TOOLS)
ORACLE_HOME/bin //bunun altında bulunur.
1. NETWORK CONFİGURATİON ASSİSTANT (NETCA) //HEM WINDOWS HEMDE LINUX'A OTOMATİK YÜKLENİYOR.
2. NETWORK MANAGER (NETMGR) //19C'DE WINDOWS'A OTOMATİK YÜKLENMİYOR AMA LINUX'A YÜKLENİYOR. 
BU IKI ARAÇTAN BİRİNİ KULLANARAK NETWORK YAPILANDIRMASI YAPABİLİRİZ.
MANUEL YÖNTEMLERLE NETWORK KONFİGURATİON YAĞILABİLİR.
(EDIT, NOTEPAD, VI, VIM)

NETWORK KONFİGURATİON DOSYALARI(NETWORKING FILES)
ORACLE_HOME/network/admin
LISTENER.ORA //DIŞARDAN GELEN BAĞLANTILARI DİNLER.
//BU DOSYAYI YAPILANDIRMADIĞIMIZ SÜRECE DIŞARIDAN CONNECT OLMAK MÜMKÜN DEĞİLDİR.
TNSNAMES.ORA
SQLNET.ORA //bu dosya yoksa işletim sistemi kimlik doğrulaması(OS Authentication) ile bağlanılamaz.

ALTER USER HR IDENTIFIED BY HR ACCOUNT UNLOCK;

win>netca
win> lsnrctl start LISTENER //windows'a cmd admin yetkisi ile açılmalı.
win> lsnrctl stop LISTENER //windows'a cmd admin yetkisi ile açılmalı.


NETWORK MANAGER (NETMGR)
lin>cd $ORACLE_HOME
cd network/admin
pwd
cd samples //örnek listener.ora, tnsnames.ora, sqlnet.ora
cd..
netca
netmgr //19c linux'da otomatik gelir.
sqlplus / as sysdba
select global_name from global_name; //db global ismi.
select name from v$database; //sid sorgular.
ls
cat listener.ora
netca


sqlnet.ora vs tnsnames.ora tanımlama (Windows)
netca(Network Configuration Assistant)
sqlnet.ora //veritbanaı bağlantı metotlarının tanımlandığı dosya.
tnsnames.ora //veritabanı bağlantısı için takma adlar(yani kısa yollar) tanımlandığı dosya.
tnsping //tnsnames.ora içinde tanımlı olan takma isimlerin çalışıp çalışmadığını kontrol eden araç

tnsping TESTDB //testsb takma adttır ping attık. o da bize cevap verdi.

NETWORK MANAGER (NETMGR) Linux
lin>hostname
*/


EAST CONNECT
WİN>win>sqlplus SYS/oracle123@192.168.1.105:1521/TEST as sysdba //SYS kullanıcısı için sysdba rolü vermeden bağlanamayız.
WİN>Lin>sqlplus SYS/oracle123@192.168.1.106:1521/ORCL.HUSEYINAYDIN.COM.TR as sysdba //SYS kullanıcısı için sysdba rolü vermeden bağlanamayız.
LİN>WİN>sqlplus SYS/oracle123@192.168.1.105:1521/TEST as sysdba
LİN>WİN>sqlplus SYS/oracle123@192.168.1.105:1522/TEST as sysdba